<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Spookywood</title>
   <link rel="stylesheet" type="text/css" href="style/style.css">
   <link href="https://fonts.googleapis.com/css?family=Creepster" rel="stylesheet">
   <link rel="shortcut icon" href="#" />
  
</head>

<body>
 
  <section>
  
   <h1>Can you survive the spooky forest?</h1>
     
       <img src="img/Blue-spookywoods2.jpg" alt="blue tinted spooky woods">
       <input id="button" type="submit" name="button" onclick="startGame();" value="enter, if you dare..."/>
  
  </section>
      
   <footer>
     
     <p>
      Spooky Theme by <a href="http://freemusicarchive.org/music/Mystified/" target="_blank">Mystified</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Attribution-NonCommercial-ShareAlike License</a>
      </p>
       <a href="http://freemusicarchive.org/music/Mystified/Traveller_Soundtrack_Selections/03_mystified_-_spooky_theme" target="_blank">http://freemusicarchive.org/music/Mystified/Traveller_Soundtrack_Selections/03_mystified_-_spooky_theme</a>
       
     <p>
   <!-- Can audio tag be styled with CSS, is there volume control -->
     <audio autoplay loop controls id="myaudio">
       <source src="media/Mystified_-_03_-_Spooky_Theme.mp3">
       Please click the music link above to hear the spooky theme.
     </audio>
     </p>
   
 </footer>
   
 <script>
//Volume control for audio playback. Original clip very loud.
   var audio = document.getElementById("myaudio");
  audio.volume = 0.02;
      

//NN output to webpage to update picture with each direction prompt,or show home picture or random killer picture picked from //list.
//
     
function startGame(){
  
  // Define the size of the game play area
var maxX = 8
var maxY = 8

// User starts at x0, y0 (bottom left of board)
var userX = 0
var userY = 0

//Killer Monster location generated randomly based on maxX and maxY variables
var killerX = Math.floor((Math.random() * maxX) + 1)
var killerY = Math.floor((Math.random() * maxY) + 1)

//Used in testing to verify random location. 
console.log("                   Killer location    " +killerX)
console.log("                   Killer location    " +killerY)

//Testing - killer non-random location. 
//var killerX = 4
//var killerY = 1

//Testing - safeHome non-random location.
//var safeHomeX = 5
//var safeHomeY = 3

//Safe Home location generated randomly based on maxX and maxY variables
var safeHomeX = Math.floor((Math.random() * maxX) + 1)
var safeHomeY = Math.floor((Math.random() * maxY) + 1)

//Used in testing to verify random location
console.log("                   Safety location    " +safeHomeX)
console.log("                   Safety location    " +safeHomeY)

//Safe Home location generated randomly based on maxX and maxY variables
var mameX = Math.floor((Math.random() * maxX) + 1)
var mameY = Math.floor((Math.random() * maxY) + 1)

//Used in testing to verify random location
console.log("                    Mame location    " +mameX)
console.log("                    Mame location    " +mameY)

// Flag that controls loop 
var killerFound = false

// Flag that controls loop
var safeHomeFound = false

// Flag that controls loop
var mamingFound = false

alert("You are driving along on this cold foggy night when suddenly you hear the sound of metal on metal screeching as your car gasps and lurches to its final resting place. You exit the car as you hear the brush rustle off in the darkened woods.")
  
  

  // Get user's name
var name = prompt("What name will Search and Rescue call out to find you?")
alert("Snapping twigs and a rustle of brush, run " +name+ " before they get you!!!")


while(!killerFound){
  var direction = prompt("Which are you going to run? (north, south, east, west)")
  
  console.log(direction)
  
  // tmp vars, only used for checking validity of new user location after move
  var newX 
  var newY
  
  // When new direction entered:
  // see what new user location would be
  // check if new user location is valid
  // check if new user location is treasure
  
  if(direction == "north"){
    newX = userX 
    newY = userY + 1
    // neither value < 0, neither is > max
    if(newX >= 0 && newY >= 0 && newX <= maxX && newY <= maxY){
      userX = newX 
      userY = newY
      
    }else {
     alert("You stop just in time before plummeting over the edge of a huge cliff") 
    }
 
  }else if(direction == "east"){
    newX = userX + 1
    newY = userY 
    // neither value < 0, neither is > max
    if(newX >= 0 && newY >= 0 && newX <= maxX && newY <= maxY){
      userX = newX 
      userY = newY
    }else {
     alert("You feel a sudden shock as you run into an electrified fence") 
    }
    
  }else if(direction == "south"){
    newX = userX 
    newY = userY - 1 
    // neither value < 0, neither is > max
    if(newX >= 0 && newY >= 0 && newX <= maxX && newY <= maxY){
      userX = newX 
      userY = newY
    }else {
     alert("You've gone off the trail and the thick undergrowth blocks your way.") 
    }
    
  }else if(direction == "west"){
    newX = userX - 1
    newY = userY
    // neither value < 0, neither is > max
    if(newX >= 0 && newY >= 0 && newX <= maxX && newY <= maxY){
      userX = newX 
      userY = newY
    }else {
     alert("You hear the sound of footsteps on the leaves, you stop and go another way.") 
    }
    
  }else {
   alert("Don't waste time please enter a real direction to run.") 
  }
  
  console.log("The user's x is: " + userX)
  console.log("The user's y is: " + userY)
  //alert("User's x is "+userX+" and User's y is "+userY)
  
  
  // see if user location matches the Killer
  if(userX == killerX && userY == killerY){
    alert("Your blood curdling scream echoes throughout the dark forest as you feel the cold steel of the axe sink into your chest. You were killed. Better luck next time")
    
   killerFound = true 
  }
  
  // see if user location matches the Killer
  if(userX == mameX && userY == mameY){
    alert("Your blood curdling scream echoes throughout the dark forest as you feel the cold steel glance off your shoulder creating a huge gash. The Killer loose the grip on the axe. Which way do you run?")
    
   mameFound = true 
  }
    // see if user location matches Safe Home
  if(userX == safeHomeX && userY == safeHomeY){
   alert("You emerge from the woods on to a road where your friends have come to look for you. Behind you hear a frustrated sigh as you watch the killer slumps shoulders walk sullenly back into the woods.")
    
   safeHomeFound = true 
    {break;}
 }
}
  
  }
  
</script>
    
</body>
</html>